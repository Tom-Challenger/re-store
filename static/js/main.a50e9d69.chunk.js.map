{"version":3,"sources":["store.js","components/shop-header/index.js","components/shop-header/shop-header.js","actions/index.js","components/shopping-cart-table/index.js","components/shopping-cart-table/shopping-cart-table.js","components/book-list-item/index.js","components/book-list-item/book-list-item.js","components/spinner/index.js","components/spinner/spinner.js","components/error-indicator/index.js","components/error-indicator/error-indicator.js","components/bookstore-service-context/bookstore-service-context.js","components/hoc/with-bookstore-service.js","utils/compose.js","components/book-list/book-list.js","components/book-list/index.js","components/pages/home-page.js","components/pages/cart-page.js","components/app/index.js","components/app/app.js","components/error-boundry/index.js","components/error-boundry/error-boundry.js","services/bookstore-service.js","reducers/book-list.js","reducers/shopping-cart.js","reducers/index.js","index.js"],"names":["timeout","ShopHeader","_ref","numItems","total","react_default","a","createElement","className","react_router_dom","to","booksLoaded","newBooks","type","payload","booksError","error","bookAddedToCart","bookId","fetchBooks","bookstoreService","dispatch","getBooks","then","data","catch","err","ShoppingCartTable","connect","_ref2","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","onIncrease","id","onDecrease","onDelete","map","item","idx","title","count","key","onClick","BookListItem","book","onAddedToCart","author","price","coverImage","src","alt","Spinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookstoreService","Wrapped","props","Object","assign","compose","_len","arguments","length","funcs","Array","_key","comp","reduceRight","prevResult","f","BookList","books","components_book_list_item","BookListContainer","this","_this$props","loading","components_spinner","components_error_indicator","book_list_BookList","Component","_ref2$bookList","bookList","ownProps","bindActionCreators","HomePage","components_book_list","components_shopping_cart_table","CartPage","App","role","components_shop_header","react_router","path","component","exact","render","ErrorBoundry","state","hasError","setState","children","BookstoreService","_this","Promise","resolve","reject","setTimeout","Math","random","Error","updateBookList","action","undefined","updateCartItems","concat","toConsumableArray","slice","updateOrder","quntity","find","itemIndex","findIndex","newItem","_item$id","_item$count","_item$title","_item$total","updateCartItem","objectSpread","updateShoppingCart","reducer","store","createStore","applyMiddleware","thunkMiddleware","next","getState","console","log","ReactDOM","es","error_boundry","value","components_app","document","getElementById"],"mappings":"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","file":"static/js/main.a50e9d69.chunk.js","sourcesContent":["import { createStore, compose, applyMiddleware } from 'redux'\r\nimport thunkMiddleware from 'redux-thunk'\r\n\r\nimport reducer from './reducers'\r\n\r\nconst logMiddleware = ({ getState, dispatch }) => (dispatch) => (action) => {\r\n\tconsole.log(action.type, store.getState())\r\n\treturn dispatch(action)\r\n}\r\n\r\nconst stringMiddleware = () => (next) => (action) => {\r\n\tif (typeof action === 'string') {\r\n\t\treturn next({\r\n\t\t\ttype: action\r\n\t\t})\r\n\t}\r\n\r\n\treturn next(action)\r\n}\r\n\r\nconst logEnhancer = (createStore) => (...args) => {\r\n\tconst store = createStore(...args)\r\n\tconst originalDispatch = store.dispatch\r\n\tstore.dispatch = (action) => {\r\n\t\tconsole.log(action.type)\r\n\t\treturn originalDispatch(action)\r\n\t}\r\n\r\n\treturn store\r\n}\r\n\r\nconst store = createStore(reducer, applyMiddleware(\r\n\tthunkMiddleware, stringMiddleware, logMiddleware))\r\n\r\nconst delayActionCreator = (timeout) => (dispatch) => {\r\n\tsetTimeout(() => dispatch({\r\n\t\ttype: 'DELAYED_ACTION'\r\n\t}), timeout)\r\n}\r\n\r\nstore.dispatch(delayActionCreator(3000))\r\n\r\nexport default store","import ShopHeader from './shop-header'\r\n\r\nexport default ShopHeader","import React from 'react'\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport './shop-header.css'\r\n\r\nconst ShopHeader = ({ numItems, total }) => {\r\n\treturn (\r\n\t\t<header className=\"shop-header row\">\r\n\t\t\t<Link to=\"/re-store\">\r\n\t\t\t\t<div className=\"logo text-dark\">ReStore</div>\r\n\t\t\t</Link>\r\n\t\t\t<Link to=\"/re-store/cart\">\r\n\t\t\t\t<div className=\"shopping-cart\">\r\n\t\t\t\t\t<i className=\"cart-icon fa fa-shopping-cart\" />\r\n\t\t\t\t\t{numItems} items (${total})\r\n\t\t\t\t</div>\r\n\t\t\t</Link>\r\n\t\t</header>\r\n\t)\r\n}\r\n\r\nexport default ShopHeader","\r\nconst booksRequested = () => {\r\n\treturn {\r\n\t\ttype: 'FETCH_BOOKS_REQUEST'\r\n\t}\r\n}\r\n\r\nconst booksLoaded = (newBooks) => {\r\n\treturn ({\r\n\t\ttype: 'FETCH_BOOKS_SUCCESS',\r\n\t\tpayload: newBooks\r\n\t})\r\n}\r\n\r\nconst booksError = (error) => {\r\n\treturn {\r\n\t\ttype: 'FETCH_BOOKS_FAILURE',\r\n\t\tpayload: error\r\n\t}\r\n}\r\n\r\nconst bookAddedToCart = (bookId) => {\r\n\treturn {\r\n\t\ttype: 'BOOK_ADDED_TO_CART',\r\n\t\tpayload: bookId\r\n\t}\r\n}\r\n\r\nconst bookRemovedFromCart = (bookId) => {\r\n\treturn {\r\n\t\ttype: 'BOOK_REMOVED_FROM_CART',\r\n\t\tpayload: bookId\r\n\t}\r\n}\r\n\r\nconst allBooksRemovedFromCart = (bookId) => {\r\n\treturn {\r\n\t\ttype: 'ALL_BOOKS_REMOVED_FROM_CART',\r\n\t\tpayload: bookId\r\n\t}\r\n}\r\n\r\nconst fetchBooksOld = (bookstoreService, dispatch) => () => {\r\n\tdispatch(booksRequested())\r\n\tbookstoreService.getBooks()\r\n\t\t.then((data) => dispatch(booksLoaded(data)))\r\n\t\t.catch((err) => dispatch(booksError(err)))\r\n}\r\n\r\nconst fetchBooks = (bookstoreService) => () => (dispatch) => {\r\n\tdispatch(booksRequested())\r\n\tbookstoreService.getBooks()\r\n\t\t.then((data) => dispatch(booksLoaded(data)))\r\n\t\t.catch((err) => dispatch(booksError(err)))\r\n}\r\n\r\nexport {\r\n\tfetchBooks,\r\n\tbookAddedToCart,\r\n\tbookRemovedFromCart,\r\n\tallBooksRemovedFromCart\r\n}","import ShoppingCartTable from './shopping-cart-table'\r\n\r\nexport default ShoppingCartTable","import React from 'react'\r\nimport { connect } from 'react-redux'\r\n\r\nimport { bookAddedToCart, bookRemovedFromCart, allBooksRemovedFromCart } from '../../actions'\r\n\r\nimport './shopping-cart-table.css'\r\n\r\nconst ShoppingCartTable = ({ items, total, onIncrease, onDecrease, onDelete }) => {\r\n\r\n\tconst renderRow = (item, idx) => {\r\n\t\tconst { id, title, count, total } = item;\r\n\r\n\t\treturn (\r\n\t\t\t<tr key={id}>\r\n\t\t\t\t<td>{idx + 1}</td>\r\n\t\t\t\t<td>{title}</td>\r\n\t\t\t\t<td>{count}</td>\r\n\t\t\t\t<td>${total}</td>\r\n\t\t\t\t<td>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tonClick={() => onDelete(id)}\r\n\t\t\t\t\t\tclassName=\"btn btn-outline-danger btn-sm float-right\">\r\n\r\n\t\t\t\t\t\t\t<i className=\"fa fa-trash-o\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tonClick={() => onIncrease(id)}\r\n\t\t\t\t\t\tclassName=\"btn btn-outline-success btn-sm float-right\">\r\n\r\n\t\t\t\t\t\t\t<i className=\"fa fa-plus-circle\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t\t<button \r\n\t\t\t\t\t\tonClick={() => onDecrease(id)}\r\n\t\t\t\t\t\tclassName=\"btn btn-outline-warning btn-sm float-right\">\r\n\r\n\t\t\t\t\t\t\t<i className=\"fa fa-minus-circle\" />\r\n\t\t\t\t\t</button>\r\n\t\t\t\t</td>\r\n\t\t\t</tr>\r\n\t\t)\r\n\t}\r\n\r\n\treturn (\r\n\t\t<div className=\"shopping-cart-table\">\r\n\t\t\t<h2>Your Order</h2>\r\n\t\t\t<table className=\"table\">\r\n\t\t\t\t<thead>\r\n\t\t\t\t\t<tr>\r\n\t\t\t\t\t\t<td>#</td>\r\n\t\t\t\t\t\t<td>Item</td>\r\n\t\t\t\t\t\t<td>Count</td>\r\n\t\t\t\t\t\t<td>Price</td>\r\n\t\t\t\t\t\t<td>Action</td>\r\n\t\t\t\t\t</tr>\r\n\t\t\t\t</thead>\r\n\r\n\t\t\t\t<tbody>\r\n\t\t\t\t\t{ items.map(renderRow) }\r\n\t\t\t\t</tbody>\r\n\t\t\t</table>\r\n\r\n\t\t\t<div className=\"total\">\r\n\t\t\t\tTotal: ${total}\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nconst mapStateToProps = ({ shoppingCart: { cartItems, orderTotal } }) => {\r\n\treturn {\r\n\t\titems: cartItems,\r\n\t\ttotal: orderTotal\r\n\t}\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n\treturn {\r\n\t\tonIncrease: (id) => {\r\n\t\t\tdispatch(bookAddedToCart(id))\r\n\t\t},\r\n\r\n\t\tonDecrease: (id) => {\r\n\t\t\tdispatch(bookRemovedFromCart(id))\r\n\t\t},\r\n\r\n\t\tonDelete: (id) => {\r\n\t\t\tdispatch(allBooksRemovedFromCart(id))\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable)","import BookListItem from './book-list-item'\r\n\r\nexport default BookListItem","import React from 'react'\r\n\r\nimport './book-list-item.css'\r\n\r\nconst BookListItem = ({ book, onAddedToCart }) => {\r\n\tconst { title, author, price, coverImage } = book\r\n\treturn (\r\n\t\t<div className=\"book-list-item\">\r\n\t\t\t<div className=\"book-cover\">\r\n\t\t\t\t<img src={coverImage} alt=\"cover\" />\r\n\t\t\t</div>\r\n\t\t\t<div className=\"book-details\">\r\n\t\t\t\t<span className=\"book-title\">{title}</span>\r\n\t\t\t\t<div className=\"book-author\">{author}</div>\r\n\t\t\t\t<div className=\"book-price\">{price}</div>\r\n\t\t\t\t<button \r\n\t\t\t\t\tonClick={onAddedToCart}\r\n\t\t\t\t\tclassName=\"btn btn-info add-to-cart\">Add to cart</button>\r\n\t\t\t</div> \r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default BookListItem","import Spinner from './spinner'\r\n\r\nexport default Spinner","import React from 'react'\r\n\r\nimport './spinner.css'\r\n\r\nconst Spinner = () => {\r\n\treturn (\r\n\t\t<div className=\"loader\">\r\n\t\t\t<span className=\"loader-status-bar\">loading...</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default Spinner","import ErrorIndicator from './error-indicator'\r\n\r\nexport default ErrorIndicator","import React from 'react'\r\n\r\nimport './error-indicator.css'\r\n\r\nconst ErrorIndicator = () => {\r\n\treturn (\r\n\t\t<div className=\"error-indicator\">\r\n\t\t\t<span className=\"error-message\">ERROR!</span>\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default ErrorIndicator","import React from 'react'\r\n\r\nconst {\r\n\tProvider : BookstoreServiceProvider,\r\n\tConsumer : BookstoreServiceConsumer\r\n} = React.createContext()\r\n\r\nexport {\r\n\tBookstoreServiceProvider,\r\n\tBookstoreServiceConsumer\r\n}","import React from 'react'\r\nimport { BookstoreServiceConsumer } from '../bookstore-service-context'\r\n\r\nconst withBookstoreService = () => (Wrapped) => {\r\n\treturn (props) => {\r\n\t\treturn (\r\n\t\t\t<BookstoreServiceConsumer>\r\n\t\t\t\t{\r\n\t\t\t\t\t(bookstoreService) => {\r\n\t\t\t\t\t\treturn <Wrapped {...props} bookstoreService={bookstoreService} />\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t</BookstoreServiceConsumer>\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withBookstoreService","\r\nconst compose = (...funcs) => (comp) => {\r\n\treturn funcs.reduceRight(\r\n\t\t(prevResult, f) => f(prevResult), comp)\r\n}\r\n\r\nexport default compose","import React, { Component } from 'react'\r\nimport { connect } from 'react-redux'\r\nimport { bindActionCreators } from 'redux'\r\n\r\n\r\nimport BookListItem from '../book-list-item'\r\nimport Spinner from '../spinner'\r\nimport ErrorIndicator from '../error-indicator'\r\n\r\nimport { withBookstoreService } from '../hoc'\r\nimport { fetchBooks, bookAddedToCart } from '../../actions'\r\nimport { compose } from '../../utils'\r\n\r\nimport './book-list.css'\r\n\r\nconst BookList = ({ books, onAddedToCart }) => {\r\n\treturn (\r\n\t\t<ul className=\"book-list\">\r\n\t\t\t{\r\n\t\t\t\tbooks.map((book) => {\r\n\t\t\t\t\treturn (\r\n\t\t\t\t\t\t<li key={book.id}>\r\n\t\t\t\t\t\t\t<BookListItem \r\n\t\t\t\t\t\t\t\tbook={book} \r\n\t\t\t\t\t\t\t\tonAddedToCart={() => onAddedToCart(book.id)} />\r\n\t\t\t\t\t\t</li>\r\n\t\t\t\t\t)\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t</ul>\r\n\t)\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n\r\n\tcomponentDidMount() {\r\n\t\tthis.props.fetchBooks()\r\n\t}\r\n\r\n\trender() {\r\n\t\tconst { books, loading, error, onAddedToCart } = this.props;\r\n\t\tif (loading) {\r\n\t\t\treturn <Spinner />\r\n\t\t}\r\n\r\n\t\tif (error) {\r\n\t\t\treturn <ErrorIndicator />\r\n\t\t}\r\n\t\treturn <BookList books={books} onAddedToCart={onAddedToCart}/>\r\n\t}\r\n}\r\n\r\nconst mapStateToProps = ( { bookList: { books, loading, error } }) => {\r\n\treturn { books, loading, error }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, ownProps) => {\r\n\tconst { bookstoreService } = ownProps\r\n\treturn bindActionCreators ({\r\n\t\tfetchBooks: fetchBooks(bookstoreService),//fetchBooks(bookstoreService, dispatch),\r\n\t\tonAddedToCart: bookAddedToCart\r\n\t}, dispatch)\r\n}\r\n\r\nexport default compose(\r\n\t\t\t\twithBookstoreService(),\r\n\t\t\t\tconnect(mapStateToProps, mapDispatchToProps)\r\n\t\t\t\t)(BookListContainer)\r\n","import BookList from './book-list'\r\n\r\nexport default BookList","import React from 'react'\r\n\r\nimport ShoppingCartTable from '../shopping-cart-table'\r\nimport BookList from '../book-list'\r\n\r\nconst HomePage = () => {\r\n\treturn (\r\n\t\t<div>\r\n\t\t\t<BookList />\r\n\t\t\t<ShoppingCartTable />\r\n\t\t</div>\r\n\t)\r\n}\r\n\r\nexport default HomePage","import React from 'react'\r\n\r\nconst CartPage = () => {\r\n\treturn <div>Cart page</div>\r\n}\r\n\r\nexport default CartPage","import App from './app'\r\n\r\nexport default App","import React from 'react'\r\nimport { Route, Switch, Redirect } from 'react-router-dom'\r\n\r\nimport ShopHeader from '../shop-header'\r\nimport { \r\n\tHomePage,\r\n\tCartPage\r\n} from '../pages'\r\n\r\nimport './app.css'\r\n\r\nconst App = ({ bookstoreService }) => {\r\n\treturn (\r\n\t\t<main role=\"main\" className=\"container\">\r\n\t\t\t<ShopHeader numItems={5} total={210} />\r\n\t\t\t<Switch>\r\n\t\t\t\t<Route path=\"/re-store\" component={HomePage} exact={true} />\r\n\t\t\t\t<Route path=\"/re-store/cart\" component={CartPage} />\r\n\r\n\t\t\t\t<Redirect to='/re-store' />\r\n\t\t\t\t<Route render={() => <h2>Page not found</h2>} />\r\n\t\t\t</Switch>\r\n\t\t</main>\r\n\t)\r\n}\r\n\r\nexport default App","import ErrorBoundry from './error-boundry'\r\n\r\nexport default ErrorBoundry","import React, { Component } from 'react'\r\n\r\nimport ErrorIndicator from '../error-indicator'\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\tstate = {\r\n\t\thasError: false\r\n\t}\r\n\r\n\tcomponentDidCatch() {\r\n\t\tthis.setState({ hasError: true })\r\n\t}\r\n\r\n\trender() {\r\n\t\tif (this.state.hasError) {\r\n\t\t\treturn <ErrorIndicator />\r\n\t\t}\r\n\r\n\t\treturn this.props.children\r\n\t}\r\n}","\r\nexport default class BookstoreService {\r\n\r\n\tdata = [\r\n\t\t\t{\r\n\t\t\t\tid: 1,\r\n\t\t\t\ttitle: 'Production-Ready Microservices',\r\n\t\t\t\tauthor: 'Susan J. Fowler',\r\n\t\t\t\tprice: 32,\r\n\t\t\t\tcoverImage: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'},\r\n\t\t\t{\r\n\t\t\t\tid: 2,\r\n\t\t\t\ttitle: 'Release It!',\r\n\t\t\t\tauthor: 'Michael T. Nygard',\r\n\t\t\t\tprice: 45,\r\n\t\t\t\tcoverImage: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'}\r\n\t\t\t]\r\n\r\n\tgetBooks() {\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tsetTimeout(()=> {\r\n\t\t\t\tif (Math.random() > 0.25) {\r\n\t\t\t\t\tresolve(this.data)\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treject(new Error('Something bad happened'))\r\n\t\t\t\t}\r\n\t\t\t}, 700)\r\n\t\t})\r\n\t}\r\n}","const updateBookList = (state, action) => {\r\n\r\n\tif (state === undefined) {\r\n\t\treturn {\r\n\t\t\tbooks: [],\r\n\t\t\tloading: true,\r\n\t\t\terror: null\r\n\t\t}\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'FETCH_BOOKS_REQUEST':\r\n\t\t\treturn {\r\n\t\t\t\tbooks: [],\r\n\t\t\t\tloading: true,\r\n\t\t\t\terror: null\r\n\t\t\t}\r\n\r\n\t\tcase 'FETCH_BOOKS_SUCCESS':\r\n\t\t\treturn {\r\n\t\t\t\tbooks: action.payload,\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: null\r\n\t\t\t}\r\n\r\n\t\tcase 'FETCH_BOOKS_FAILURE':\r\n\t\t\treturn {\r\n\t\t\t\tbooks: [],\r\n\t\t\t\tloading: false,\r\n\t\t\t\terror: action.payload\r\n\t\t\t}\r\n\r\n\t\tdefault:\r\n\t\t\treturn state.bookList\r\n\t}\r\n}\r\n\r\nexport default updateBookList","const updateCartItems = (cartItems, item, idx) => {\r\n\tif (item.count === 0) {\r\n\t\treturn [\r\n\t\t...cartItems.slice(0, idx),\r\n\t\t...cartItems.slice(idx + 1)\r\n\t\t]\r\n\t}\r\n\r\n\tif (idx === -1) {\r\n\t\treturn [\r\n\t\t\t...cartItems,\r\n\t\t\titem\r\n\t\t]\r\n\t}\r\n\r\n\treturn [\r\n\t\t...cartItems.slice(0, idx),\r\n\t\titem,\r\n\t\t...cartItems.slice(idx + 1)\r\n\t]\r\n}\r\n\r\nconst updateCartItem = (book, item = {}, quntity) => {\r\n\r\n\tconst { \r\n\t\tid = book.id, \r\n\t\tcount = 0, \r\n\t\ttitle = book.title, \r\n\t\ttotal = 0 } = item\r\n\r\n\treturn {\r\n\t\tid, \r\n\t\ttitle,\r\n\t\tcount: count + quntity,\r\n\t\ttotal: total + quntity*book.price\r\n\t}\r\n}\r\n\r\nconst updateOrder = (state, bookId, quntity) => {\r\n\tconst book = state.bookList.books.find((book) => book.id === bookId)\r\n\tconst itemIndex = state.shoppingCart.cartItems.findIndex(({ id }) => id === bookId)\r\n\tconst item = state.shoppingCart.cartItems[itemIndex]\r\n\r\n\tconst newItem = updateCartItem(book, item, quntity)\r\n\treturn {\r\n\t\t...state.shoppingCart,\r\n\t\tcartItems: updateCartItems(state.shoppingCart.cartItems, newItem, itemIndex)\r\n\t}\r\n}\r\n\r\nconst updateShoppingCart = (state, action) => {\r\n\r\n\tif (state === undefined) {\r\n\t\treturn {\r\n\t\t\tcartItems: [],\r\n\t\t\torderTotal: 0\r\n\t\t}\r\n\t}\r\n\r\n\tswitch (action.type) {\r\n\t\tcase 'BOOK_ADDED_TO_CART':\r\n\t\t\treturn updateOrder(state, action.payload, 1)\r\n\r\n\t\t case 'BOOK_REMOVED_FROM_CART':\r\n\t\t\treturn updateOrder(state, action.payload, -1)\r\n\r\n\t\t case 'ALL_BOOKS_REMOVED_FROM_CART':\r\n\t\t \tconst item = state.shoppingCart.cartItems.find(({ id }) => id === action.payload)\r\n\t\t\treturn updateOrder(state, action.payload, -item.count)\r\n\r\n\t\tdefault: \r\n\t\t\treturn state.shoppingCart\r\n\t}\r\n}\r\n\r\nexport default updateShoppingCart","import updateBookList from './book-list'\r\nimport updateShoppingCart from './shopping-cart'\r\n\r\nconst reducer = (state, action) => {\r\n\t\r\n\treturn {\r\n\t\tbookList: updateBookList(state, action),\r\n\t\tshoppingCart: updateShoppingCart(state, action)\r\n\t}\r\n}\r\n\r\nexport default reducer","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport { Provider } from 'react-redux'\r\nimport { BrowserRouter as Router } from 'react-router-dom'\r\n\r\nimport App from './components/app'\r\nimport ErrorBoundry from './components/error-boundry'\r\nimport BookstoreService from './services/bookstore-service'\r\nimport { BookstoreServiceProvider } from './components/bookstore-service-context'\r\n\r\nimport store from './store'\r\n\r\nconst bookstoreService = new BookstoreService()\r\n\r\nReactDOM.render(\r\n\t<Provider store={store}>\r\n\t\t<ErrorBoundry>\r\n\t\t\t<BookstoreServiceProvider value={bookstoreService}>\r\n\t\t\t\t<Router>\r\n\t\t\t\t\t<App />\r\n\t\t\t\t</Router>\r\n\t\t\t</BookstoreServiceProvider>\r\n\t\t</ErrorBoundry>\r\n\t</Provider>,\r\n\tdocument.getElementById('root')\r\n)"],"sourceRoot":""}